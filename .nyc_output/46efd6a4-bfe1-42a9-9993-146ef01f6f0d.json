{"/Users/kator/Workspace/Personal/kator-example-code/src/services/extractor.ts":{"path":"/Users/kator/Workspace/Personal/kator-example-code/src/services/extractor.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":216}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":51}},"5":{"start":{"line":8,"column":13},"end":{"line":8,"column":43}},"6":{"start":{"line":9,"column":19},"end":{"line":9,"column":41}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":44}},"8":{"start":{"line":11,"column":0},"end":{"line":36,"column":2}},"9":{"start":{"line":12,"column":22},"end":{"line":12,"column":67}},"10":{"start":{"line":13,"column":21},"end":{"line":13,"column":63}},"11":{"start":{"line":14,"column":22},"end":{"line":14,"column":61}},"12":{"start":{"line":15,"column":4},"end":{"line":34,"column":5}},"13":{"start":{"line":16,"column":19},"end":{"line":16,"column":53}},"14":{"start":{"line":17,"column":22},"end":{"line":17,"column":70}},"15":{"start":{"line":18,"column":8},"end":{"line":33,"column":9}},"16":{"start":{"line":19,"column":29},"end":{"line":19,"column":82}},"17":{"start":{"line":20,"column":34},"end":{"line":20,"column":91}},"18":{"start":{"line":21,"column":29},"end":{"line":21,"column":83}},"19":{"start":{"line":22,"column":28},"end":{"line":22,"column":80}},"20":{"start":{"line":23,"column":36},"end":{"line":23,"column":93}},"21":{"start":{"line":24,"column":25},"end":{"line":24,"column":46}},"22":{"start":{"line":25,"column":12},"end":{"line":25,"column":26}},"23":{"start":{"line":26,"column":12},"end":{"line":26,"column":31}},"24":{"start":{"line":27,"column":12},"end":{"line":27,"column":35}},"25":{"start":{"line":28,"column":12},"end":{"line":28,"column":37}},"26":{"start":{"line":29,"column":12},"end":{"line":29,"column":51}},"27":{"start":{"line":30,"column":12},"end":{"line":30,"column":47}},"28":{"start":{"line":31,"column":12},"end":{"line":31,"column":37}},"29":{"start":{"line":32,"column":12},"end":{"line":32,"column":24}},"30":{"start":{"line":35,"column":4},"end":{"line":35,"column":21}},"31":{"start":{"line":37,"column":0},"end":{"line":44,"column":2}},"32":{"start":{"line":38,"column":4},"end":{"line":43,"column":5}},"33":{"start":{"line":39,"column":8},"end":{"line":39,"column":52}},"34":{"start":{"line":42,"column":8},"end":{"line":42,"column":25}},"35":{"start":{"line":45,"column":0},"end":{"line":49,"column":2}},"36":{"start":{"line":46,"column":4},"end":{"line":47,"column":25}},"37":{"start":{"line":47,"column":8},"end":{"line":47,"column":25}},"38":{"start":{"line":48,"column":4},"end":{"line":48,"column":24}},"39":{"start":{"line":50,"column":0},"end":{"line":54,"column":2}},"40":{"start":{"line":51,"column":4},"end":{"line":52,"column":25}},"41":{"start":{"line":52,"column":8},"end":{"line":52,"column":25}},"42":{"start":{"line":53,"column":4},"end":{"line":53,"column":87}},"43":{"start":{"line":53,"column":40},"end":{"line":53,"column":85}},"44":{"start":{"line":55,"column":0},"end":{"line":59,"column":2}},"45":{"start":{"line":56,"column":4},"end":{"line":57,"column":25}},"46":{"start":{"line":57,"column":8},"end":{"line":57,"column":25}},"47":{"start":{"line":58,"column":4},"end":{"line":58,"column":86}},"48":{"start":{"line":58,"column":39},"end":{"line":58,"column":84}},"49":{"start":{"line":61,"column":0},"end":{"line":69,"column":2}},"50":{"start":{"line":62,"column":4},"end":{"line":68,"column":5}},"51":{"start":{"line":63,"column":27},"end":{"line":63,"column":42}},"52":{"start":{"line":64,"column":8},"end":{"line":64,"column":36}},"53":{"start":{"line":67,"column":8},"end":{"line":67,"column":25}},"54":{"start":{"line":70,"column":0},"end":{"line":74,"column":2}},"55":{"start":{"line":71,"column":4},"end":{"line":72,"column":25}},"56":{"start":{"line":72,"column":8},"end":{"line":72,"column":25}},"57":{"start":{"line":73,"column":4},"end":{"line":73,"column":32}},"58":{"start":{"line":75,"column":0},"end":{"line":82,"column":2}},"59":{"start":{"line":76,"column":4},"end":{"line":77,"column":25}},"60":{"start":{"line":77,"column":8},"end":{"line":77,"column":25}},"61":{"start":{"line":78,"column":28},"end":{"line":78,"column":62}},"62":{"start":{"line":79,"column":4},"end":{"line":80,"column":25}},"63":{"start":{"line":80,"column":8},"end":{"line":80,"column":25}},"64":{"start":{"line":81,"column":4},"end":{"line":81,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":23},"end":{"line":11,"column":24}},"loc":{"start":{"line":11,"column":42},"end":{"line":36,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":37,"column":24},"end":{"line":37,"column":25}},"loc":{"start":{"line":37,"column":39},"end":{"line":44,"column":1}},"line":37},"3":{"name":"(anonymous_3)","decl":{"start":{"line":45,"column":23},"end":{"line":45,"column":24}},"loc":{"start":{"line":45,"column":38},"end":{"line":49,"column":1}},"line":45},"4":{"name":"(anonymous_4)","decl":{"start":{"line":50,"column":26},"end":{"line":50,"column":27}},"loc":{"start":{"line":50,"column":43},"end":{"line":54,"column":1}},"line":50},"5":{"name":"(anonymous_5)","decl":{"start":{"line":53,"column":27},"end":{"line":53,"column":28}},"loc":{"start":{"line":53,"column":40},"end":{"line":53,"column":85}},"line":53},"6":{"name":"(anonymous_6)","decl":{"start":{"line":55,"column":25},"end":{"line":55,"column":26}},"loc":{"start":{"line":55,"column":42},"end":{"line":59,"column":1}},"line":55},"7":{"name":"(anonymous_7)","decl":{"start":{"line":58,"column":27},"end":{"line":58,"column":28}},"loc":{"start":{"line":58,"column":39},"end":{"line":58,"column":84}},"line":58},"8":{"name":"(anonymous_8)","decl":{"start":{"line":61,"column":31},"end":{"line":61,"column":32}},"loc":{"start":{"line":61,"column":47},"end":{"line":69,"column":1}},"line":61},"9":{"name":"(anonymous_9)","decl":{"start":{"line":70,"column":31},"end":{"line":70,"column":32}},"loc":{"start":{"line":70,"column":54},"end":{"line":74,"column":1}},"line":70},"10":{"name":"(anonymous_10)","decl":{"start":{"line":75,"column":26},"end":{"line":75,"column":27}},"loc":{"start":{"line":75,"column":44},"end":{"line":82,"column":1}},"line":75}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":15,"column":4},"end":{"line":34,"column":5}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":34,"column":5}},{"start":{"line":15,"column":4},"end":{"line":34,"column":5}}],"line":15},"4":{"loc":{"start":{"line":18,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":33,"column":9}},{"start":{"line":18,"column":8},"end":{"line":33,"column":9}}],"line":18},"5":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":23}},"type":"binary-expr","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":14}},{"start":{"line":18,"column":18},"end":{"line":18,"column":23}}],"line":18},"6":{"loc":{"start":{"line":46,"column":4},"end":{"line":47,"column":25}},"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":47,"column":25}},{"start":{"line":46,"column":4},"end":{"line":47,"column":25}}],"line":46},"7":{"loc":{"start":{"line":51,"column":4},"end":{"line":52,"column":25}},"type":"if","locations":[{"start":{"line":51,"column":4},"end":{"line":52,"column":25}},{"start":{"line":51,"column":4},"end":{"line":52,"column":25}}],"line":51},"8":{"loc":{"start":{"line":56,"column":4},"end":{"line":57,"column":25}},"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":57,"column":25}},{"start":{"line":56,"column":4},"end":{"line":57,"column":25}}],"line":56},"9":{"loc":{"start":{"line":71,"column":4},"end":{"line":72,"column":25}},"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":72,"column":25}},{"start":{"line":71,"column":4},"end":{"line":72,"column":25}}],"line":71},"10":{"loc":{"start":{"line":76,"column":4},"end":{"line":77,"column":25}},"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":77,"column":25}},{"start":{"line":76,"column":4},"end":{"line":77,"column":25}}],"line":76},"11":{"loc":{"start":{"line":79,"column":4},"end":{"line":80,"column":25}},"type":"if","locations":[{"start":{"line":79,"column":4},"end":{"line":80,"column":25}},{"start":{"line":79,"column":4},"end":{"line":80,"column":25}}],"line":79}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":2,"14":2,"15":2,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":2,"33":2,"34":0,"35":1,"36":2,"37":1,"38":1,"39":1,"40":1,"41":0,"42":1,"43":3,"44":1,"45":1,"46":0,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":0,"54":1,"55":1,"56":0,"57":1,"58":1,"59":1,"60":0,"61":1,"62":1,"63":0,"64":1},"f":{"0":2,"1":2,"2":2,"3":2,"4":1,"5":3,"6":1,"7":1,"8":1,"9":1,"10":1},"b":{"0":[1,1,1],"1":[0,2],"2":[2,2],"3":[2,0],"4":[1,1],"5":[2,2],"6":[1,1],"7":[0,1],"8":[0,1],"9":[0,1],"10":[0,1],"11":[0,1]},"inputSourceMap":{"version":3,"file":"/Users/kator/Workspace/Personal/kator-example-code/src/services/extractor.ts","sources":["/Users/kator/Workspace/Personal/kator-example-code/src/services/extractor.ts"],"names":[],"mappings":"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","sourcesContent":["import xml2js from 'xml2js';\nimport fs from 'fs';\n\nimport { Book } from '../entities';\n\nconst parser = new xml2js.Parser();\n\nexport const parseRdfFile = async (rdfPath: string) => {\n    const rdfString = await fs.promises.readFile(rdfPath);\n    const rootNode = await parser.parseStringPromise(rdfString);\n    const ebookData = rootNode['rdf:RDF']['pgterms:ebook'][0];\n    if (ebookData) {\n      const id = extractBookID(ebookData.$);\n      const title = extractTitle(ebookData['dcterms:title']);\n      if (id && title) {\n        const subjects = extractSubjects(ebookData['dcterms:subject']);\n        const licenseRights = extractLicenseRights(ebookData['dcterms:rights']);\n        const language = extractLanguage(ebookData['dcterms:language']);\n        const authors = extractAuthors(ebookData['dcterms:creator']);\n        const publicationDate = extractPublishedDate(ebookData['dcterms:issued']);\n\n        const book = new Book();\n        book.id = +id;\n        book.title = title;\n        book.authors = authors;\n        book.language = language;\n        book.publicationDate = publicationDate;\n        book.licenseRights = licenseRights;\n        book.subjects = subjects;\n        return book;\n      }\n    }\n\n    return undefined;\n};\n\nexport const extractBookID = (aboutNode: any) => {\n  try {\n    return aboutNode['rdf:about'].split('/')[1];\n  } catch (error) {\n    return undefined;\n  }\n};\n\nexport const extractTitle = (titleNode: any) => {\n  if (!Array.isArray(titleNode)) return undefined;\n  return titleNode[0];\n};\n\nexport const extractSubjects = (subjectNode: any) => {\n  if (!Array.isArray(subjectNode)) return undefined;\n\n  return subjectNode.map(\n    (subject: any): string => subject['rdf:Description'][0]['rdf:value'][0]\n  );\n};\n\nexport const extractAuthors = (creatorNode: any) => {\n  if (!Array.isArray(creatorNode)) return undefined;\n\n  return creatorNode.map(\n    (author: any): string => author['pgterms:agent'][0]['pgterms:name'][0]\n  );\n};\n\n// Even cleaner wrapping in a try/catch block?\nexport const extractPublishedDate = (issuedDate: any) => {\n  try {\n    const dateString = issuedDate[0]._;\n    return new Date(dateString);\n  } catch (error) {\n    return undefined;\n  }\n};\n\nexport const extractLicenseRights = (licenseRightsNode?: string[]) => {\n  if (!Array.isArray(licenseRightsNode)) return undefined;\n\n  return licenseRightsNode[0];\n};\n\nexport const extractLanguage = (languageNode: any) => {\n  if (!Array.isArray(languageNode)) return undefined;\n\n  const descriptionNode = languageNode[0]['rdf:Description'];\n  if (!Array(descriptionNode)) return undefined;\n\n  return descriptionNode[0]['rdf:value'][0]._;\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"996f5173ef5ee3cfe40a90cd0ef16b911a683bf1","contentHash":"8e0eadf45cd0af8a62f9b0d9f382d0c3e75e9b78107d6d2432c0ef215ba0256d"},"/Users/kator/Workspace/Personal/kator-example-code/src/entities/index.ts":{"path":"/Users/kator/Workspace/Personal/kator-example-code/src/entities/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":103}},"10":{"start":{"line":10,"column":21},"end":{"line":10,"column":103}},"11":{"start":{"line":10,"column":72},"end":{"line":10,"column":103}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"13":{"start":{"line":13,"column":0},"end":{"line":13,"column":41}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":50},"end":{"line":9,"column":51}},"loc":{"start":{"line":9,"column":71},"end":{"line":11,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":24}},{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":50},"end":{"line":11,"column":1}}],"line":9},"5":{"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":103}},"type":"if","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":103}},{"start":{"line":10,"column":21},"end":{"line":10,"column":103}}],"line":10},"6":{"loc":{"start":{"line":10,"column":25},"end":{"line":10,"column":70}},"type":"binary-expr","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":70}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"f":{"0":1,"1":1,"2":0,"3":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/kator/Workspace/Personal/kator-example-code/src/entities/index.ts","sources":["/Users/kator/Workspace/Personal/kator-example-code/src/entities/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,yCAAuB","sourcesContent":["export * from './Book';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3db6d97b21b9b3ce8dcc5d0acc5bf88b092b4aae","contentHash":"24ac1fd3aa1a865c3cdb69dcfd5a3a4b19de884ed55d27d1c96a1e56fd82062f"},"/Users/kator/Workspace/Personal/kator-example-code/src/entities/Book.ts":{"path":"/Users/kator/Workspace/Personal/kator-example-code/src/entities/Book.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":28}},"2":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"4":{"start":{"line":4,"column":79},"end":{"line":4,"column":131}},"5":{"start":{"line":5,"column":9},"end":{"line":5,"column":150}},"6":{"start":{"line":5,"column":22},"end":{"line":5,"column":43}},"7":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"8":{"start":{"line":5,"column":81},"end":{"line":5,"column":150}},"9":{"start":{"line":6,"column":4},"end":{"line":6,"column":66}},"10":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"11":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"12":{"start":{"line":9,"column":79},"end":{"line":9,"column":109}},"13":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"14":{"start":{"line":12,"column":0},"end":{"line":12,"column":22}},"15":{"start":{"line":13,"column":18},"end":{"line":13,"column":36}},"16":{"start":{"line":14,"column":11},"end":{"line":15,"column":1}},"17":{"start":{"line":16,"column":0},"end":{"line":22,"column":33}},"18":{"start":{"line":23,"column":0},"end":{"line":27,"column":36}},"19":{"start":{"line":28,"column":0},"end":{"line":32,"column":38}},"20":{"start":{"line":33,"column":0},"end":{"line":36,"column":39}},"21":{"start":{"line":37,"column":0},"end":{"line":41,"column":46}},"22":{"start":{"line":42,"column":0},"end":{"line":45,"column":44}},"23":{"start":{"line":46,"column":0},"end":{"line":49,"column":39}},"24":{"start":{"line":50,"column":0},"end":{"line":53,"column":40}},"25":{"start":{"line":54,"column":0},"end":{"line":57,"column":40}},"26":{"start":{"line":58,"column":0},"end":{"line":61,"column":9}},"27":{"start":{"line":62,"column":0},"end":{"line":62,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":46},"end":{"line":2,"column":47}},"loc":{"start":{"line":2,"column":87},"end":{"line":7,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":46},"end":{"line":8,"column":47}},"loc":{"start":{"line":8,"column":62},"end":{"line":10,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":18},"end":{"line":2,"column":22}},{"start":{"line":2,"column":26},"end":{"line":2,"column":41}},{"start":{"line":2,"column":46},"end":{"line":7,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":42},"end":{"line":3,"column":48}},{"start":{"line":3,"column":51},"end":{"line":3,"column":125}}],"line":3},"2":{"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":67},"end":{"line":3,"column":118}},{"start":{"line":3,"column":121},"end":{"line":3,"column":125}}],"line":3},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},{"start":{"line":4,"column":4},"end":{"line":5,"column":150}}],"line":4},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":35}},{"start":{"line":4,"column":39},"end":{"line":4,"column":77}}],"line":4},"5":{"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},{"start":{"line":5,"column":58},"end":{"line":5,"column":150}}],"line":5},"6":{"loc":{"start":{"line":5,"column":85},"end":{"line":5,"column":149}},"type":"binary-expr","locations":[{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},{"start":{"line":5,"column":148},"end":{"line":5,"column":149}}],"line":5},"7":{"loc":{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":94},"end":{"line":5,"column":98}},{"start":{"line":5,"column":101},"end":{"line":5,"column":143}}],"line":5},"8":{"loc":{"start":{"line":5,"column":101},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":109},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":143}}],"line":5},"9":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":62}},"type":"binary-expr","locations":[{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":62}}],"line":6},"10":{"loc":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":8,"column":18},"end":{"line":8,"column":22}},{"start":{"line":8,"column":26},"end":{"line":8,"column":41}},{"start":{"line":8,"column":46},"end":{"line":10,"column":1}}],"line":8},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},{"start":{"line":9,"column":4},"end":{"line":9,"column":109}}],"line":9},"12":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":77}},"type":"binary-expr","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":35}},{"start":{"line":9,"column":39},"end":{"line":9,"column":77}}],"line":9}},"s":{"0":1,"1":10,"2":10,"3":10,"4":10,"5":0,"6":0,"7":0,"8":0,"9":10,"10":1,"11":9,"12":9,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1},"f":{"0":10,"1":9},"b":{"0":[1,1,1],"1":[1,9],"2":[0,9],"3":[10,0],"4":[10,10],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[10,9,0],"10":[1,1,1],"11":[9,0],"12":[9,9]},"inputSourceMap":{"version":3,"file":"/Users/kator/Workspace/Personal/kator-example-code/src/entities/Book.ts","sources":["/Users/kator/Workspace/Personal/kator-example-code/src/entities/Book.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,qCAA0H;AAI1H,IAAa,IAAI,GAAjB,MAAa,IAAI;CAkChB,CAAA;AA5BC;IAJC,uBAAa,CAAC;QACb,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,UAAU;KACjB,CAAC;;gCACgB;AAIlB;IAFC,gBAAM,EAAE;IACR,eAAK,EAAE;;mCACa;AAIrB;IAFC,gBAAM,CAAC,cAAc,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC1C,eAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;qCACA;AAG1B;IADC,gBAAM,EAAE;;sCACgB;AAIzB;IAFC,gBAAM,EAAE;IACR,eAAK,EAAE;8BACiB,IAAI;6CAAC;AAG9B;IADC,gBAAM,EAAE;;2CACqB;AAG9B;IADC,gBAAM,CAAC,cAAc,CAAC;;sCACI;AAG3B;IADC,0BAAgB,EAAE;8BACD,IAAI;uCAAC;AAGvB;IADC,0BAAgB,EAAE;8BACD,IAAI;uCAAC;AAjCZ,IAAI;IAFhB,gBAAM,EAAE;IACR,eAAK,CAAC,CAAC,OAAO,EAAE,SAAS,EAAE,iBAAiB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;GACtD,IAAI,CAkChB;AAlCY,oBAAI","sourcesContent":["import { Column, Entity, PrimaryColumn, CreateDateColumn, UpdateDateColumn, ManyToMany, JoinTable, Index } from 'typeorm';\n\n@Entity()\n@Index(['title', 'authors', 'publicationDate'], { fulltext: true })\nexport class Book {\n\n  @PrimaryColumn({\n    unsigned: true,\n    type: 'smallint',\n  })\n  public id: number;\n\n  @Column()\n  @Index()\n  public title: string;\n\n  @Column('simple-array', { nullable: true })\n  @Index({ fulltext: true })\n  public authors?: string[];\n\n  @Column()\n  public language?: string;\n\n  @Column()\n  @Index()\n  public publicationDate?: Date;\n\n  @Column()\n  public licenseRights?: string;\n\n  @Column('simple-array')\n  public subjects?: string[];\n\n  @CreateDateColumn()\n  public createdAt: Date;\n\n  @UpdateDateColumn()\n  public updatedAt: Date; // For audit?\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f5799f6de7fd7c23bf03ab24f42ba362bc6ede4f","contentHash":"e6def1e0a3111a14079f8e26b95f3c350eb99cfdc5adca89a2629ab051d3e838"}}